<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Examen jQuery. Ejercicio 3</title>
  <link rel="stylesheet" href="css/estilos-generales.css">
  <script src="js/jquery-3.7.1.min.js"></script>
</head>

<body>

  <div class="container">

    <h1>Examen jQuery. Ejercicio 3</h1>

    <p><strong>3.1.</strong> Cuando el usuario pulse el botón, se hará una llamada AJAX al archivo local marcas.txt, que simulará ser la respuesta en json del servidor. Este archivo constará de un array de marcas de coche. Cuando se haga la llamada, el botón se inhabilitará para evitar llamadas duplicadas. Si la llamada ha sido exitosa, se mostrará el número de elementos del array en un alert de JavaScript. Cuando la llamada haya concluido, exitosamente o no, se volverá a habilitar el botón. <strong>[2 puntos]</strong></p>

    <button id="cargarMarcas">Cargar Marcas</button>

  </div>

  <script>
    // Inserta aquí tu código jQuery
    $(document).ready(function(){
      $("#cargarMarcas").on("click" , function(){
        $("#cargarMarcas").attr("disabled" , true);
   
        $.ajax({
          url: "marcas.txt",
          type: "GET",
          dataType: "json",
          success: function (data) {
            
            let marcas = data.length;
            alert("Numero de marcas :"+marcas);
          
          },

          error: function (xhr, status, error) {
            console.error("Error:", error);
            
          },
          complete: function (xhr, status) {
            console.log("La solicitud se ha completado");
            console.log("Estado final:", status);
            $("#cargarMarcas").attr("disabled" , false);

          },
        });



      })



    })
  </script>





</body>

</html>